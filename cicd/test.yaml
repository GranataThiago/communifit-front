test:
    image: node:19
    stage: test
    dependencies: [build]
    script:
        - yarn test --coverage
    coverage: '/All files[^|]*\|[^|]*\s+([\d\.]+)/'
    cache:
        paths:
            - coverage/
    artifacts:
        paths:
            - coverage/
        when: always
        reports:
            junit:
                - junit.xml
            coverage_report:
                coverage_format: coverage
                path: coverage/cobertura-coverage.xml
  